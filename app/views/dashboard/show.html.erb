<% if policy(:dashboard).see_volunteers_section? %>
  <div class="row">
    <div class="col-sm-4 col-md-3">
      <h1>Volunteers</h1>
    </div>
    <div class="col-sm-8 col-md-9">
      <%= link_to "New Volunteer", new_volunteer_path, class: "btn btn-primary" %>
    </div>
  </div>
  <hr>

  <%= render "volunteer_filters" %>

  <table class="table table-striped table-bordered" id="volunteers">
    <thead>
      <tr>
        <th>Volunteer</th>
        <th>Supervisor</th>
        <th>Status</th>
        <th>Case Number</th>
        <th>Actions</th>
      </tr>
    </thead>

    <tbody>
      <% @volunteers.each do |volunteer| %>
        <tr>
          <td><%= volunteer.email %></td>
          <td id="supervisor-column"><%= volunteer&.supervisor&.email %></td>
          <td id="status-column">
            <% if volunteer.role == "inactive" %>
              <%= volunteer.role %>
            <% else %>
              Active
            <% end %>
          </td>
          <td><%= volunteer.casa_cases.pluck(:case_number).join(', ') %></td>
          <td><%= link_to 'Edit', edit_volunteer_path(volunteer) %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>


<% if policy(:dashboard).see_cases_section? %>
<br>
  <div class="row">
    <div class="col-sm-3 col-md-2">
      <h1>Cases</h1>
    </div>
    <% if policy(:dashboard).see_volunteers_section? %>
      <div class="col-sm-9 col-md-10">
        <%= link_to "New Case", new_casa_case_path, class: "btn btn-primary" %>
      </div>
    <% end %>
  </div>
  <table class="table table-striped table-bordered case-list">
    <tr>
      <th>Case Number</th>
      <th>Teen Program Eligible</th>
      <th>Actions</th>
    </tr>
    <% @casa_cases.each do |casa_case| %>
      <tr>
        <td><%= casa_case.case_number %></td>
        <td><%= casa_case.teen_program_eligible %></td>
        <td><%= link_to("Edit", edit_casa_case_path(casa_case)) %></td>
      </tr>
    <% end %>
  </table>
  <br>
  <div class="row">
    <div class="col-sm-6 col-md-4">
      <h1>Case Contacts</h1>
    </div>
    <div class="col-sm-6 col-md-8">
      <%= link_to "New Case Contact",  new_case_contact_path, class: "btn btn-primary" %>
    </div>
  </div>

  <table class="table case-contacts-table">
    <tr>
      <th>Date</th>
      <th>Duration</th>
      <th>Type</th>
    </tr>
    <% @case_contacts.each do |contact| %>
      <tr>
        <td><%= contact.occurred_at.strftime('%B %e, %Y') %></td>
        <td><%= contact.display_duration_minutes %></td>
        <td><%= contact.humanized_type %></td>
      </tr>
    <% end %>
  </table>
<% end %>
