<% if policy(:dashboard).see_volunteers_section? %>
  <div class="row">
    <div class="col-sm-4 col-md-3">
      <h1>Volunteers</h1>
    </div>
    <div class="col-sm-8 col-md-9">
      <%= link_to "New Volunteer", new_volunteer_path, class: "btn btn-primary" %>
    </div>
  </div>
  <hr>

  <%= render "volunteer_filters" %>

  <table class="table table-striped table-bordered" id="volunteers">
    <thead>
      <tr>
        <th>Volunteer</th>
        <th>Supervisor</th>
        <th>Status</th>
        <th>Assigned To Transition Aged Youth</th>
        <th>Case Number</th>
        <th>Actions</th>
      </tr>
    </thead>

    <tbody>
      <% @volunteers.each do |volunteer| %>
        <tr>
          <td><%= volunteer.email %></td>
          <td id="supervisor-column"><%= volunteer&.supervisor&.email %></td>
          <td id="status-column"><%= volunteer.status %></td>
          <td><%= volunteer.assigned_to_transition_aged_youth? %></td>
          <td><%= volunteer.casa_cases.pluck(:case_number).join(', ') %></td>
          <td><%= link_to 'Edit', edit_volunteer_path(volunteer) %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>


<% if policy(:dashboard).see_cases_section? %>
  <br>
  <div class="row">
    <div class="col-sm-3 col-md-2">
      <h1>Cases</h1>
    </div>
    <% if policy(:dashboard).see_volunteers_section? %>
      <div class="col-sm-9 col-md-10">
        <%= link_to "New Case", new_casa_case_path, class: "btn btn-primary" %>
      </div>
    <% end %>
  </div>
  <table class="table case-list" id="casa_cases">
    <thead>
      <tr>
        <th>Case Number</th>
        <th>Teen Program Eligible</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @casa_cases.each do |casa_case| %>
        <tr>
          <td><%= casa_case.case_number %></td>
          <td><%= casa_case.teen_program_eligible %></td>
          <td><%= link_to("Edit", edit_casa_case_path(casa_case)) %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <br>
  <div class="row">
    <div class="col-sm-6 col-md-4">
      <h1>Case Contacts</h1>
    </div>
  </div>

  <table class="table case-contacts-table" id="case_contacts">
    <thead>
      <tr>
        <th>Date</th>
        <th>Duration</th>
        <th>Contact Made</th>
        <th>Contact Medium</th>
        <th>Type</th>
      </tr>
    </thead>
    <tbody>
      <% @case_contacts.each do |contact| %>
        <tr>
          <td><%= contact.occurred_at.strftime('%B %e, %Y') %></td>
          <td><%= contact.duration_minutes %></td>
          <td><%= contact.contact_made %></td>
          <td><%= contact.medium_type %></td>
          <td><%= contact.humanized_type %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>
