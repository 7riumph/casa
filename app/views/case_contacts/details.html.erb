<div class="title-wrapper pt-30">
  <div class="title mb-30">
    <h1><%= @case_contact.decorate.draft_state %> Case Contact</h1>
  </div>
</div>

<%= render "progress_bar" %>

<div>
  <%= form_with(model: @case_contact, url: wizard_path(nil, case_contact_id: @case_contact.id), local: true, id: "casa-contact-form", class: "component-validated-form") do |form| %>
    <%= render "/shared/error_messages", resource: @case_contact %>

    <div id="enter-contact-details" class="card-style-1 pl-25 mb-10">
      <h2 class="mb-3"><label>3. Enter Contact Details</label><span class="red-letter"> *</span></h2>
      <div class="">
        <h5 classs="mb-3"><label>a. Contact Made</label></h5>
        <div class="form-check radio-style mb-20">
          <%= form.radio_button :contact_made, true,
            checked: @case_contact.contact_made,
            required: true,
            class: 'form-check-input' %>
          <%= form.label "Yes", class: "form-check-label",
            for: "case_contact_contact_made_true" %>
        </div>
        <div class="form-check radio-style mb-20">
          <%= form.radio_button :contact_made, false,
            checked: set_contact_made_false(@case_contact),
            required: true,
            class: 'form-check-input' %>
          <%= form.label "No", class: "form-check-label",
            for: "case_contact_contact_made_false" %>
        </div>
      </div>

      <div class="field contact-medium form-group">
        <h5 classs="mb-3"><label>b. Contact Medium</label></h5>
        <%= form.collection_radio_buttons(:medium_type, contact_mediums, 'value', 'label') do |b| %>
          <div class="form-check radio-style mb-20">
            <%= b.radio_button(class: "form-check-input") %>
            <%= b.label(class: "form-check-label") %>
          </div>
        <% end %>
      </div>

      <div class="pr-50">
        <h5 class="mb-3"><%= form.label :occurred_at, "c. Occurred On" %></h5>
        <div class="input-style-1">
          <% occurred_at = @case_contact.occurred_at || Time.zone.now %>
          <%= render "layouts/components/ranged_date_picker",
            form: form, model_field: :occurred_at, initial_value: occurred_at.to_date,
            max_date: "today", component_name: "occurred on" %>
        </div>
      </div>

      <div class="pr-50 ">
        <h5 class="mb-3"><label>d. Duration of Meeting</label></h5>
        <%= render(Form::HourMinuteDurationComponent.new(form: form, hour_value: duration_hours(@case_contact), minute_value: duration_minutes(@case_contact))) %>
      </div>
    </div>

    <div class="actions mb-10">
      <%= link_to previous_wizard_path(case_contact_id: @case_contact.id), class: "btn-sm main-btn secondary-btn-outline btn-hover" do %>
        <i class="lni lni-arrow-left mr-5"></i> Previous
      <% end %>

      <%= button_tag( type: "submit" , class: "btn-sm main-btn primary-btn btn-hover" ) do %>
        <i class="lni lni-arrow-right mr-5"></i> Continue
      <% end %>
    </div>
  <% end %>
</div>